import{p as H,_ as J,r as a,v as K,j as E,g as Q,x as W,c as f,k as X,l as F,b as S,m as I,a as l,F as Z,n as ee,d as M,t as N,o as c,s as se}from"./Hc6fgaMG.js";import{u as ae,V as le,C as te}from"./IwieJbga.js";import{u as oe,A as re}from"./jcxU-htY.js";import{M as ne}from"./BzPiQ1zL.js";import{u as ie}from"./DtiuviiQ.js";const ue=H("/games/memory/img/icon.webp"),ce=window.setInterval,de={class:"wrapper"},me={key:1,class:"cards-block style-bordeaux"},ve={class:"cards"},pe=["onClick"],fe={class:"view back-view"},ge=["src"],we={class:"details style-bordeaux c-white"},_e={class:"time"},he={class:"flips"},ke="/games/memory/wr_start.png",ye={__name:"memory",setup(be){const V=a(!1),d=a(null),r=a(20),g=a(0),w=a(0),m=a(!1),v=a(!1),u=a(null),p=a(null),_=a(0),P=ie(),h=a(!1),k=["1.webp","2.webp","3.webp","4.webp","5.webp","6.webp"],n=K([]),t=a("/games/memory/video/wr_start.mp4"),y=a(!1),o={start:"/games/memory/video/wr_start.mp4",idle:"/games/memory/video/wr_idle.mp4",lose:"/games/memory/video/wr_lose.mp4",win:"/games/memory/video/wr_win.mp4"},L=E(()=>t.value===o.idle),x=E(()=>localStorage.getItem("wr_memory_completed")==="true"),{returnToMap:z}=ae(),{showAlert:D,alertMessage:R,triggerAlert:b,hideAlert:U}=oe(),Y=()=>{const s=[...k,...k];return s.sort(()=>Math.random()-.5),s.map(e=>({image:e,flipped:!1,shake:!1}))},C=()=>{clearInterval(d.value),r.value=20,g.value=0,w.value=0,m.value=!1,v.value=!1,u.value=null,p.value=null,n.splice(0,n.length,...Y())},$=()=>{d.value=ce(()=>{r.value<=0?clearInterval(d.value):r.value-=1},1e3)},A=()=>{u.value=null,p.value=null,v.value=!1},j=()=>{const s=n[u.value.index],e=n[p.value.index];s.image===e.image?(w.value+=1,w.value===k.length&&(clearInterval(d.value),t.value=o.win),A()):(s.shake=!0,e.shake=!0,setTimeout(()=>{s.shake=!1,e.shake=!1,s.flipped=!1,e.flipped=!1,A()},1e3))},G=(s,e)=>{if(m.value||(m.value=!0,$()),v.value||s.flipped||r.value<=0)return;g.value+=1;const i=n[e];i.flipped=!0,u.value?(p.value={...s,index:e},v.value=!0,j()):u.value={...s,index:e}},O=()=>{U(),y.value=!0},B=()=>{t.value===o.start?(t.value=o.idle,V.value=!0,y.value=!1,b("Find matching pairs from memories in 20 seconds!")):t.value===o.lose&&(C(),t.value=o.idle)},q=()=>{B(),t.value===o.win&&(localStorage.setItem("wr_memory_completed","true"),h.value=!0,_.value=10,P.addCoins(_.value))};return Q(()=>{x.value?(h.value=!0,b("You have already completed this memory game")):b("Press anywhere to continue"),C()}),W(r,s=>{s<=0&&m.value&&(t.value=o.lose)}),(s,e)=>(c(),f("div",de,[I(D)?(c(),X(re,{key:0,message:I(R)},null,8,["message"])):F("",!0),S(le,{poster:ke,"video-src":t.value,loop:L.value,"show-skip":y.value,"can-play":!x.value,onStarted:O,onEnded:q,onSkip:B},null,8,["video-src","loop","show-skip","can-play"]),V.value?(c(),f("div",me,[l("ul",ve,[(c(!0),f(Z,null,ee(n,(i,T)=>(c(),f("li",{key:T,class:se(["card",{flip:i.flipped,shake:i.shake}]),onClick:Ce=>G(i,T)},[e[0]||(e[0]=l("div",{class:"view front-view"},[l("img",{src:ue,alt:"icon"})],-1)),l("div",fe,[l("img",{src:`/games/memory/img/${i.image}`,alt:"card-img"},null,8,ge)])],10,pe))),128))]),l("div",we,[l("p",_e,[e[2]||(e[2]=M(" Time: ")),l("span",null,[l("b",null,N(r.value),1),e[1]||(e[1]=M("s"))])]),l("p",he,[e[3]||(e[3]=M(" Flips: ")),l("span",null,[l("b",null,N(g.value),1)])]),S(ne,{class:"no-border-shadow","button-text":"Refresh",size:"large",onClicked:C})])])):F("",!0),S(te,{title:"You passed the memory game",visible:h.value,coins:_.value,"on-clicked":I(z)},null,8,["visible","coins","on-clicked"])]))}},Ae=J(ye,[["__scopeId","data-v-89d6f6fa"]]);export{Ae as default};
